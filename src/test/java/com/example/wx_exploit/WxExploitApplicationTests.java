package com.example.wx_exploit;

import com.example.wx_exploit.pojo.*;
import com.example.wx_exploit.util.weixinSignUtil;
import net.sf.json.JSONObject;
import org.junit.jupiter.api.Test;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;

@SpringBootTest
class WxExploitApplicationTests {

    @Autowired
    private weixinSignUtil weixinSignUtil;

    @Test
    void contextLoads() {
        //菜单对象
        Button button = new Button();
        //一级菜单
        button.getButton().add(new ClickButton("点击","1"));
        //第二个一级菜单
        button.getButton().add(new ViewButton("百度","http://www.baidu.com"));
        //第三个一级菜单
        SubButton subButton = new SubButton("我的");
        //第三个菜单中的子菜单
        subButton.getSub_button().add(new PhotoOrAlbumButton("发图片","31"));
        subButton.getSub_button().add(new ClickButton("点我","32"));
        subButton.getSub_button().add(new ViewButton("百度","http://www.baidu.com"));
        //加入第三个一级菜单
        button.getButton().add(subButton);
        //将菜单对象转为JSON
        JSONObject jsonObject = JSONObject.fromObject(button);
        System.out.println(jsonObject);
    }

    @Test
    void testTicket(){
        /**
         * 测试生成二维码
         */
        String ticket = weixinSignUtil.getTicket();
        System.out.println(ticket);
    }

    @Test
    void testUser(){
        String user = weixinSignUtil.getUser("opS2n6IdrfES6gUmQ08ZjLHpn9-E");
        System.out.println(user);
    }

}
